import{j as e,b as P,u as L,r as p,L as E}from"./index-Wx5DAnrH.js";import{c as y,a as G,b as S,A as $}from"./Alert-BdvLvEOP.js";import{S as R}from"./sweetalert2.esm.all-BY1s0Tb6.js";import{g as k}from"./ImageConfig-BSyY58UR.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],I=y("ChevronLeft",A);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],D=y("ChevronRight",B);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=[["path",{d:"m11 17-5-5 5-5",key:"13zhaf"}],["path",{d:"m18 17-5-5 5-5",key:"h8a8et"}]],T=y("ChevronsLeft",M);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]],z=y("ChevronsRight",q),U=({currentPage:a,totalPages:f,onPageChange:j,totalItems:N,itemsPerPage:m=3})=>{const g=Number(a),h=Number(f),w=Number(N||0),i=Number(m),C=Math.ceil(w/i),s=Math.max(C,h);if(isNaN(g)||isNaN(s)||s<=1)return null;const v=()=>{const l=Number(a),r=Number(s);if(isNaN(l)||isNaN(r)||r<=1)return[];const x=2,c=[],t=[];let d;c.push(1),r>1&&c.push(r);for(let n=Math.max(2,l-x);n<=Math.min(r-1,l+x);n++)c.includes(n)||c.push(n);c.sort((n,b)=>n-b);for(let n=0;n<c.length;n++)d&&c[n]-d>1&&t.push("..."),t.push(c[n]),d=c[n];return t},o=l=>{typeof l=="number"&&l!==a&&l>=1&&l<=s&&j(l)};return e.jsx("div",{className:"flex items-center justify-center gap-4 w-full bg-white text-sm rounded",children:e.jsxs("nav",{className:"flex items-center space-x-1",children:[e.jsx("button",{onClick:()=>o(1),disabled:a===1,className:`p-2 rounded ${a===1?"text-gray-400 cursor-not-allowed":"text-mediumGray hover:text-primary hover:bg-secondary"}`,children:e.jsx(T,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>o(a-1),disabled:a===1,className:`p-2 rounded ${a===1?"text-gray-400 cursor-not-allowed":"text-mediumGray hover:text-primary hover:bg-secondary"}`,children:e.jsx(I,{className:"h-5 w-5"})}),e.jsx("div",{className:"flex items-center space-x-1",children:v().map((l,r)=>e.jsx("button",{onClick:()=>o(l),className:`px-3 py-2 rounded ${l===a?"bg-primary text-secondary hover:bg-primaryContrast":l==="..."?"text-mediumGray cursor-default":"text-mediumGray hover:text-primary hover:bg-secondary"}`,children:l},r))}),e.jsx("button",{onClick:()=>o(a+1),disabled:a===s,className:`p-2 rounded ${a===s?"text-gray-400 cursor-not-allowed":"text-mediumGray hover:text-primary hover:bg-secondary"}`,children:e.jsx(D,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>o(s),disabled:a===s,className:`p-2 rounded ${a===s?"text-gray-400 cursor-not-allowed":"text-mediumGray hover:text-primary hover:bg-secondary"}`,children:e.jsx(z,{className:"h-5 w-5"})})]})})},J=()=>{var x,c;const a=P(),f=L(),[j,N]=p.useState(!0),[m,g]=p.useState(1),[h,w]=p.useState([]),[i,C]=p.useState(null),s=(x=a.state)==null?void 0:x.filter,v=5;p.useEffect(()=>{if(!s){f("/",{replace:!0});return}o(m)},[m,s]);const o=async t=>{var d,n,b,_;N(!0);try{const u=await G.get("/parkingrecord-active/searchUser",{params:{searchMode:"similar",license_id:s.license_id,province:(d=s.province)==null?void 0:d.value,vehicle_brand:((n=s.vehicle_brand)==null?void 0:n.value)||null,vehicle_color:((b=s.vehicle_color)==null?void 0:b.value)||null,timestamp_in:((_=s.timestamp_in)==null?void 0:_.value)||null,limit:v,page:t}});console.log(u.data.meta),w(u.data.data),C(u.data.meta)}catch(u){console.error("Error fetching cars:",u)}finally{N(!1)}},l=t=>{i&&t>=1&&t<=i.lastPage&&g(t)},r=()=>{R.fire({title:'<span class="text-[#42526E] text-lg">ติดต่อเจ้าหน้าที่</span>',html:`
               <div class="text-[#42526E] text-sm">
                       ขอความช่วยเหลือเพิ่มเติม
                   </div>
                   <div class="text-[#42526E] text-sm">
                       โทร. 02-111-1111
                   </div>
               `,icon:"info",iconColor:"#0052CC",confirmButtonText:"ตกลง",confirmButtonColor:"#0052CC",customClass:{confirmButton:"swal-custom-btn",popup:"swal-popup",title:"swal-title",htmlContainer:"swal-html"},width:"300px"})};return j&&!h.length?e.jsx(E,{}):!j&&!h.length?e.jsx("div",{className:"p-4 text-center",children:e.jsx(S,{variant:"destructive",children:e.jsx($,{children:"ไม่พบข้อมูลรถยนต์"})})}):e.jsxs("div",{className:"text-header",children:[e.jsx("header",{children:e.jsxs("h1",{className:"text-lg font-bold text-center pt-8",children:["ผลการค้นหา  ",i!=null&&i.total?`(${i==null?void 0:i.total})`:""]})}),e.jsx("div",{className:"mt-4 bg-white p-4 rounded border-2 border-secondary w-full max-w-md mx-auto",children:e.jsxs("div",{className:"space-y-2 text-header",children:[e.jsxs("div",{className:"flex w-full justify-between",children:[e.jsx("p",{children:"เลขทะเบียน:"}),e.jsx("p",{className:"font-bold text-md",children:(s==null?void 0:s.license_id)||"-"})]}),e.jsxs("div",{className:"flex w-full justify-between",children:[e.jsx("p",{children:"จังหวัด:"}),e.jsx("p",{className:"font-bold text-md",children:((c=s==null?void 0:s.province)==null?void 0:c.label)||"-"})]}),(s==null?void 0:s.timestamp_in)&&e.jsxs("div",{className:"flex w-full justify-between",children:[e.jsx("p",{children:"เวลา:"}),e.jsx("p",{className:"font-bold text-md",children:s.timestamp_in.label})]}),(s==null?void 0:s.vehicle_brand)&&e.jsxs("div",{className:"flex w-full justify-between",children:[e.jsx("p",{children:"ยี่ห้อ:"}),e.jsx("p",{className:"font-bold text-md",children:s.vehicle_brand.label})]}),(s==null?void 0:s.vehicle_color)&&e.jsxs("div",{className:"flex w-full justify-between",children:[e.jsx("p",{children:"สี:"}),e.jsx("p",{className:"font-bold text-md",children:s.vehicle_color.label})]})]})}),e.jsx("div",{className:"flex-1 pt-4",children:e.jsx("div",{className:"space-y-4",children:h.map(t=>e.jsxs("div",{className:"border-2 rounded border-secondary",onClick:()=>f("/detail",{state:{data:t}}),children:[e.jsx("div",{className:"bg-secondary",children:t.car_image&&e.jsx("img",{src:k(t.car_image),alt:"Vehicle",className:"h-60 w-full rounded-t"})}),e.jsxs("div",{className:"p-4 space-y-2",children:[e.jsxs("div",{className:"flex w-full justify-between",children:[e.jsx("p",{children:"ข้อมูลรถ:"}),e.jsx("div",{children:t.license_image?e.jsx("img",{src:k(t.license_image),alt:t.license_id,className:"h-14 rounded-lg object-contain"}):e.jsx("p",{className:"font-semibold",children:t.license_id})})]}),e.jsxs("div",{className:"flex w-full justify-between",children:[e.jsx("p",{children:"เวลาเข้า:"}),e.jsx("p",{children:new Date(t.timestamp_in).toLocaleString("en-GB")})]}),e.jsx("p",{className:" text-right text-primary underline text-sm",children:"ดูรายละเอียด"})]})]}))})}),e.jsxs("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-300 p-4 space-y-2 z-20",children:[i&&i.lastPage>1&&e.jsx(U,{currentPage:m,totalPages:i.lastPage,onPageChange:l,totalItems:i.total,itemsPerPage:v,showItemCount:!1}),e.jsx("button",{onClick:r,className:"w-full text-sm text-mediumGray pt-2",children:"ติดต่อเจ้าหน้าที่"})]})]})};export{J as default};
