import{b as y,u as w,r as u,j as e,L as x}from"./index-Wx5DAnrH.js";import{c as S,a as E}from"./Alert-BdvLvEOP.js";import{S as m}from"./SelectInput-CnhQdi0H.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],L=S("Info",I),C=["BMW","Mercedes","Toyota","Honda","Ford"],D=["ขาว","เทา","ดำ","แดง","น้ำเงิน","เขียว"],M=4,A=11,T=/^[\u0E00-\u0E7F0-9]*$/,H=()=>{var p;const v=y(),c=w(),[f,h]=u.useState(!1),n=v.state,[t,_]=u.useState({license_id:(n==null?void 0:n.license_id)||"",province:n!=null&&n.province?{value:n.province,label:n.province}:null,timestamp_in:null,vehicle_brand:null,vehicle_color:null}),b=()=>{const s=[];for(let a=0;a<24;a++)for(let l=0;l<60;l+=30){const i=String(a).padStart(2,"0"),o=String(l).padStart(2,"0"),r=`${i}:${o}`;s.push({value:r,label:r})}return s},j=s=>{if(!s)return"กรุณากรอกหมายเลขทะเบียนรถ";if(!T.test(s))return"กรุณากรอกภาษาไทยและตัวเลขเท่านั้น";if(s.length<M)return"กรุณาใส่หมายเลขทะเบียนที่มีความยาวมากกว่า 4 ตัวอักษร";if(s.length>A)return"กรุณาใส่หมายเลขทะเบียนที่มีความยาวไม่เกิน 10 ตัวอักษร"},d=s=>a=>{_(l=>({...l,[s]:a}))},N=()=>{var i;const s={},a=j(t.license_id);return a&&(s.license_id=a),(i=t.province)!=null&&i.value||(s.province="กรุณาเลือกจังหวัด"),t.timestamp_in||t.vehicle_brand||t.vehicle_color||(s.form="โปรดกรอกข้อมูลเพิ่มเติมอย่างน้อย 1 ช่อง"),Object.keys(s).length===0},g=async()=>{var l,i,o;if(!N())return;const s=new Date,a=t.timestamp_in?new Date(`${s.toDateString()} ${t.timestamp_in.value}`).toISOString():"";h(!0);try{const r=await E.get("/parkingrecord-active/searchUser",{params:{license_id:t.license_id,province:(l=t.province)==null?void 0:l.value,timestamp_in:a,vehicle_color:((i=t.vehicle_color)==null?void 0:i.value)||null,vehicle_brand:((o=t.vehicle_brand)==null?void 0:o.value)||null,searchMode:"similar",limit:3,page:1}});r.data.meta.total===0?c("/notFound",{state:{formData:t}}):c("/listCar",{state:{data:r.data,filter:t}})}catch(r){console.error("Error fetching data:",r),c("/notFound",{state:{formData:t}})}finally{h(!1)}};return f?e.jsx(x,{}):n?e.jsxs("div",{className:" text-header",children:[t.timestamp_in||t.vehicle_brand||t.vehicle_color?e.jsx("div",{className:"pt-8"}):e.jsxs("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-3 flex items-start gap-2 mt-8",children:[e.jsx(L,{className:"h-5 w-5 text-yellow-600 mt-1"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-yellow-800",children:"ไม่พบข้อมูลรถ"}),e.jsx("p",{className:"text-sm text-yellow-800",children:"โปรดกรอกข้อมูลเพิ่มเติม อย่างน้อย 1 รายการ"})]})]}),e.jsxs("div",{className:"pt-4",children:[e.jsx("div",{className:"flex w-full justify-between",children:e.jsx("p",{className:"text-md mb-2 font-bold",children:"ข้อมูลที่ค้นหา"})}),e.jsxs("div",{className:"rounded p-4 border-2 border-secondary space-y-2 mb-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:"",children:"เลขทะเบียน:"}),e.jsx("p",{className:"text-md font-semibold",children:t.license_id})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:"",children:"จังหวัด:"}),e.jsx("p",{className:"text-md font-semibold",children:(p=t.province)==null?void 0:p.value})]})]}),e.jsx("header",{className:"",children:e.jsx("h1",{className:"text-md font-bold text-left",children:"ข้อมูลเพิ่มเติม"})}),e.jsxs("div",{className:"space-y-4 mt-4",children:[e.jsx(m,{label:"เลือกเวลาเข้าจอด",options:b(),value:t.timestamp_in,onChange:d("timestamp_in"),placeholder:"เลือกเวลา"}),e.jsx(m,{label:"เลือกยี่ห้อ",options:C.map(s=>({value:s,label:s})),value:t.vehicle_brand,onChange:d("vehicle_brand"),placeholder:"เลือกยี่ห้อ"}),e.jsx(m,{label:"เลือกสี",options:D.map(s=>({value:s,label:s})),value:t.vehicle_color,onChange:d("vehicle_color"),placeholder:"เลือกสี"})]})]}),e.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200",children:e.jsx("div",{className:"max-w-2xl mx-auto p-4",children:e.jsx("button",{onClick:g,className:"w-full bg-primary text-white rounded-full p-2 font-medium",children:"ค้นหา"})})})]}):e.jsx(x,{})};export{H as default};
